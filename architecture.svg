<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
    <!-- 样式定义 -->
    <defs>
        <style type="text/css">
            .layer-bg { fill: #f8f9fa; stroke: #495057; stroke-width: 2; }
            .frontend-bg { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
            .gateway-bg { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
            .service-bg { fill: #e8f5e8; stroke: #388e3c; stroke-width: 2; }
            .common-bg { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
            .data-bg { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
            
            .component-box { fill: #ffffff; stroke: #333; stroke-width: 1; }
            .ruoyi-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 1; }
            .oms-box { fill: #e8f5e8; stroke: #388e3c; stroke-width: 1; }
            .common-box { fill: #fff3e0; stroke: #f57c00; stroke-width: 1; }
            
            .title-text { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #333; }
            .layer-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333; }
            .component-text { font-family: Arial, sans-serif; font-size: 11px; fill: #333; }
            .small-text { font-family: Arial, sans-serif; font-size: 9px; fill: #666; }
        </style>
    </defs>

    <!-- 标题 -->
    <text x="600" y="30" class="title-text" text-anchor="middle">RuoYi-Cloud 微服务架构图</text>
    <text x="600" y="50" class="small-text" text-anchor="middle">基于 Spring Cloud &amp; Alibaba + Vue.js 的分布式微服务系统</text>

    <!-- 前端展示层 -->
    <rect class="frontend-bg" x="50" y="70" width="1100" height="80" rx="5"/>
    <text class="layer-text" x="70" y="95">前端展示层</text>
    <text class="small-text" x="70" y="110">Presentation Layer</text>
    
    <rect class="component-box" x="200" y="90" width="250" height="40" rx="3"/>
    <text class="component-text" x="325" y="108" text-anchor="middle">RuoYi-UI</text>
    <text class="small-text" x="325" y="120" text-anchor="middle">Vue.js + Element-UI</text>
    
    <rect class="component-box" x="500" y="90" width="180" height="40" rx="3"/>
    <text class="component-text" x="590" y="108" text-anchor="middle">移动端</text>
    <text class="small-text" x="590" y="120" text-anchor="middle">H5 / 小程序</text>
    
    <rect class="component-box" x="720" y="90" width="180" height="40" rx="3"/>
    <text class="component-text" x="810" y="108" text-anchor="middle">第三方系统</text>
    <text class="small-text" x="810" y="120" text-anchor="middle">API 接口</text>

    <!-- 网关层 -->
    <rect class="gateway-bg" x="50" y="170" width="1100" height="80" rx="5"/>
    <text class="layer-text" x="70" y="195">API 网关层</text>
    <text class="small-text" x="70" y="210">Gateway Layer</text>
    
    <rect class="component-box" x="200" y="190" width="200" height="40" rx="3"/>
    <text class="component-text" x="300" y="208" text-anchor="middle">RuoYi-Gateway</text>
    <text class="small-text" x="300" y="220" text-anchor="middle">Spring Cloud Gateway [8080]</text>
    
    <rect class="component-box" x="450" y="190" width="120" height="40" rx="3"/>
    <text class="component-text" x="510" y="208" text-anchor="middle">负载均衡</text>
    <text class="small-text" x="510" y="220" text-anchor="middle">Load Balancer</text>
    
    <rect class="component-box" x="620" y="190" width="120" height="40" rx="3"/>
    <text class="component-text" x="680" y="208" text-anchor="middle">限流熔断</text>
    <text class="small-text" x="680" y="220" text-anchor="middle">Sentinel</text>
    
    <rect class="component-box" x="790" y="190" width="120" height="40" rx="3"/>
    <text class="component-text" x="850" y="208" text-anchor="middle">路由转发</text>
    <text class="small-text" x="850" y="220" text-anchor="middle">Route Forward</text>

    <!-- 认证授权层 -->
    <rect class="layer-bg" x="50" y="270" width="1100" height="60" rx="5"/>
    <text class="layer-text" x="70" y="290">认证授权层</text>
    <text class="small-text" x="70" y="305">Authentication &amp; Authorization</text>
    
    <rect class="ruoyi-box" x="200" y="285" width="150" height="30" rx="3"/>
    <text class="component-text" x="275" y="302" text-anchor="middle">RuoYi-Auth [9200]</text>
    
    <rect class="component-box" x="400" y="285" width="120" height="30" rx="3"/>
    <text class="component-text" x="460" y="302" text-anchor="middle">JWT Token</text>
    
    <rect class="component-box" x="570" y="285" width="120" height="30" rx="3"/>
    <text class="component-text" x="630" y="302" text-anchor="middle">OAuth2</text>
    
    <rect class="component-box" x="740" y="285" width="120" height="30" rx="3"/>
    <text class="component-text" x="800" y="302" text-anchor="middle">权限控制 RBAC</text>

    <!-- 微服务层 -->
    <rect class="service-bg" x="50" y="350" width="1100" height="160" rx="5"/>
    <text class="layer-text" x="70" y="375">微服务层</text>
    <text class="small-text" x="70" y="390">Microservices Layer</text>
    
    <!-- RuoYi 核心服务 -->
    <text class="component-text" x="200" y="410" font-weight="bold">RuoYi 核心服务</text>
    
    <rect class="ruoyi-box" x="100" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="150" y="435" text-anchor="middle">系统模块</text>
    <text class="small-text" x="150" y="448" text-anchor="middle">System [9201]</text>
    
    <rect class="ruoyi-box" x="220" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="270" y="435" text-anchor="middle">代码生成</text>
    <text class="small-text" x="270" y="448" text-anchor="middle">Generator [9202]</text>
    
    <rect class="ruoyi-box" x="340" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="390" y="435" text-anchor="middle">定时任务</text>
    <text class="small-text" x="390" y="448" text-anchor="middle">Job [9203]</text>
    
    <rect class="ruoyi-box" x="460" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="510" y="435" text-anchor="middle">文件服务</text>
    <text class="small-text" x="510" y="448" text-anchor="middle">File [9300]</text>
    
    <!-- OMS 业务服务 -->
    <text class="component-text" x="750" y="410" font-weight="bold">OMS 业务服务</text>
    
    <rect class="oms-box" x="620" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="670" y="435" text-anchor="middle">商品管理</text>
    <text class="small-text" x="670" y="448" text-anchor="middle">Goods [9401]</text>
    
    <rect class="oms-box" x="740" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="790" y="435" text-anchor="middle">库存管理</text>
    <text class="small-text" x="790" y="448" text-anchor="middle">Inventory [9402]</text>
    
    <rect class="oms-box" x="860" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="910" y="435" text-anchor="middle">供应链</text>
    <text class="small-text" x="910" y="448" text-anchor="middle">Supply [9403]</text>
    
    <rect class="oms-box" x="980" y="420" width="100" height="40" rx="3"/>
    <text class="component-text" x="1030" y="435" text-anchor="middle">渠道管理</text>
    <text class="small-text" x="1030" y="448" text-anchor="middle">Channel</text>
    
    <!-- 监控中心 -->
    <rect class="component-box" x="100" y="470" width="100" height="30" rx="3" style="fill: #fff8e1; stroke: #ff8f00;"/>
    <text class="component-text" x="150" y="487" text-anchor="middle">监控中心 [9100]</text>

    <!-- 通用基础层 -->
    <rect class="common-bg" x="50" y="530" width="1100" height="100" rx="5"/>
    <text class="layer-text" x="70" y="555">通用基础层</text>
    <text class="small-text" x="70" y="570">Common Infrastructure Layer</text>
    
    <rect class="common-box" x="100" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="145" y="595" text-anchor="middle">核心模块</text>
    
    <rect class="common-box" x="210" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="255" y="595" text-anchor="middle">权限范围</text>
    
    <rect class="common-box" x="320" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="365" y="595" text-anchor="middle">多数据源</text>
    
    <rect class="common-box" x="430" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="475" y="595" text-anchor="middle">日志记录</text>
    
    <rect class="common-box" x="540" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="585" y="595" text-anchor="middle">缓存服务</text>
    
    <rect class="common-box" x="650" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="695" y="595" text-anchor="middle">安全模块</text>
    
    <rect class="common-box" x="760" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="805" y="595" text-anchor="middle">系统接口</text>
    
    <rect class="common-box" x="870" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="915" y="595" text-anchor="middle">Swagger</text>
    
    <rect class="common-box" x="980" y="580" width="90" height="25" rx="3"/>
    <text class="small-text" x="1025" y="595" text-anchor="middle">分布式事务</text>

    <!-- 数据存储层 -->
    <rect class="data-bg" x="50" y="650" width="1100" height="60" rx="5"/>
    <text class="layer-text" x="70" y="675">数据存储层</text>
    <text class="small-text" x="70" y="690">Data Storage Layer</text>
    
    <rect class="component-box" x="200" y="670" width="120" height="25" rx="3"/>
    <text class="small-text" x="260" y="685" text-anchor="middle">MySQL 主数据库</text>
    
    <rect class="component-box" x="340" y="670" width="120" height="25" rx="3"/>
    <text class="small-text" x="400" y="685" text-anchor="middle">Redis 缓存</text>
    
    <rect class="component-box" x="480" y="670" width="120" height="25" rx="3"/>
    <text class="small-text" x="540" y="685" text-anchor="middle">Nacos 配置中心</text>
    
    <rect class="component-box" x="620" y="670" width="120" height="25" rx="3"/>
    <text class="small-text" x="680" y="685" text-anchor="middle">MinIO 文件存储</text>
    
    <rect class="component-box" x="760" y="670" width="120" height="25" rx="3"/>
    <text class="small-text" x="820" y="685" text-anchor="middle">Seata 分布式事务</text>

    <!-- 数据流向箭头 -->
    <line x1="325" y1="150" x2="300" y2="170" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="300" y1="250" x2="275" y2="270" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="150" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="270" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="390" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="510" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="670" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="790" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    <line x1="275" y1="330" x2="910" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrow)"/>
    
    <!-- 箭头标记定义 -->
    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
        </marker>
    </defs>

    <!-- 技术栈说明 -->
    <text x="50" y="780" class="small-text">技术栈: Spring Boot 2.7.x | Spring Cloud 2021.x | Spring Cloud Alibaba | Vue.js 2.x | Element-UI | MySQL 8.0 | Redis 6.x | Nacos 2.x</text>
</svg>